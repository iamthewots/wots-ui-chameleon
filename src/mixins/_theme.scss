@use "../functions/theme";
@use "../settings/variables";
@use "sass:color";
@use "sass:map";
@use "sass:meta";

@mixin set-color-palette(
    $palette-name,
    $palette-primary,
    $palette-secondary,
    $palette-tertiary
) {
    $palette: (
        "primary": $palette-primary,
        "secondary": $palette-secondary,
        "tertiary": $palette-tertiary,
    );
    @each $shade, $color in $palette {
        @if (meta.type-of($color) != color) {
            @error "Invalid color provided";
        }
        $color-lighter: color.scale(
            $color,
            $lightness: variables.$def-shade-delta
        );
        $color-darker: color.scale(
            $color,
            $lightness: variables.$def-shade-delta * -1
        );
        $color-text: var(--clr-text-dark);
        @if (theme.is-color-dark($color) == true) {
            $color-text: var(--clr-text-light);
        }

        --clr-#{$palette-name}-#{$shade}: #{$color};
        --clr-#{$palette-name}-#{$shade}-lighter: #{$color-lighter};
        --clr-#{$palette-name}-#{$shade}-darker: #{$color-darker};
        --clr-#{$palette-name}-#{$shade}-text: #{$color-text};
    }
    $color-shadow-primary: color.change(
        map.get($palette, variables.$def-shadow-shade),
        $alpha: variables.$def-shadow-primary-alpha
    );
    $color-shadow-secondary: color.change(
        map.get($palette, variables.$def-shadow-shade),
        $alpha: variables.$def-shadow-secondary-alpha
    );

    --clr-#{$palette-name}-shadow-primary: #{$color-shadow-primary};
    --clr-#{$palette-name}-shadow-secondary: #{$color-shadow-secondary};
}

@mixin create-palette-classes($palette-name) {
    @each $shade in primary, secondary, tertiary {
        .bkg-#{$palette-name}-#{$shade} {
            background-color: var(--clr-#{$palette-name}-#{$shade});
            color: var(--clr-#{$palette-name}-#{$shade}-text);
        }

        .brd-#{$palette-name}-#{$shade} {
            border-color: var(--clr-#{$palette-name}-#{$shade}-darker);
        }

        .bsh-#{$palette-name}-#{$shade} {
            box-shadow: theme.get-box-shadow($palette-name);
            
            &-hover:hover {
                box-shadow: theme.get-box-shadow($palette-name);
            }
        }

        .clr-#{$palette-name}-#{$shade} {
            color: var(--clr-#{$palette-name}-#{$shade});
        }

        .grd-#{$palette-name}-#{$shade} {
            background-image: theme.get-linear-gradient(
                #{$palette-name}-#{$shade}
            );
            color: var(--clr-#{$palette-name}-#{$shade}-text);
        }
    }

    .pal-#{$palette-name} {
        --clr-primary: var(--clr-#{$palette-name}-primary);
        --clr-secondary: var(--clr-#{$palette-name}-secondary);
        --clr-tertiary: var(--clr-#{$palette-name}-tertiary);
        --clr-border: var(
            --clr-#{$palette-name}-#{variables.$def-border-shade}
        );

        @each $shade in primary, secondary, tertiary {
            .bkg-#{$shade} {
                --clr-text: var(--clr-#{$palette-name}-#{$shade}-text);
            }

            .grd-#{$shade} {
                background-image: theme.get-linear-gradient(
                    #{$palette-name}-#{$shade}
                );
                color: var(--clr-#{$palette-name}-#{$shade}-text);
            }
        }
    }
}

// .highlight-hover { background-color: var(--clr-highlight) }
// .bkg-twitch { background-color: var(--clr-twitch-primary); --clr-highlight: var(--clr-twitch-primary-lighter)
